["9ea81a67d8f607f018b06bcafef79538e4c7b614","4cf29c2e4fa1378fa705f255c9f41b00e4c4ddab",[],[],{"version":3,"sources":["/home/ziddi/Desktop/venders/node_modules/socketcluster-client/lib/auth.js"],"names":["AuthEngine","_internalStorage","prototype","_isLocalStorageEnabled","err","global","localStorage","setItem","removeItem","e","saveToken","name","token","options","callback","removeToken","loadToken","authToken","getItem","module","exports"],"mappings":"AAAA,IAAIA,aAAa,SAAbA,UAAa,GAAY;AAC3B,OAAKC,gBAAL,GAAwB,EAAxB;AACD,CAFD;;AAIAD,WAAWE,SAAX,CAAqBC,sBAArB,GAA8C,YAAY;AACxD,MAAIC,GAAJ;AACA,MAAI;AAEFC,WAAOC,YAAP;;AAIAD,WAAOC,YAAP,CAAoBC,OAApB,CAA4B,sBAA5B,EAAoD,CAApD;AACAF,WAAOC,YAAP,CAAoBE,UAApB,CAA+B,sBAA/B;AACD,GARD,CAQE,OAAOC,CAAP,EAAU;AACVL,UAAMK,CAAN;AACD;AACD,SAAO,CAACL,GAAR;AACD,CAdD;;AAgBAJ,WAAWE,SAAX,CAAqBQ,SAArB,GAAiC,UAAUC,IAAV,EAAgBC,KAAhB,EAAuBC,OAAvB,EAAgCC,QAAhC,EAA0C;AACzE,MAAI,KAAKX,sBAAL,MAAiCE,OAAOC,YAA5C,EAA0D;AACxDD,WAAOC,YAAP,CAAoBC,OAApB,CAA4BI,IAA5B,EAAkCC,KAAlC;AACD,GAFD,MAEO;AACL,SAAKX,gBAAL,CAAsBU,IAAtB,IAA8BC,KAA9B;AACD;AACDE,cAAYA,SAAS,IAAT,EAAeF,KAAf,CAAZ;AACD,CAPD;;AASAZ,WAAWE,SAAX,CAAqBa,WAArB,GAAmC,UAAUJ,IAAV,EAAgBG,QAAhB,EAA0B;AAC3D,MAAIF,KAAJ;;AAEA,OAAKI,SAAL,CAAeL,IAAf,EAAqB,UAAUP,GAAV,EAAea,SAAf,EAA0B;AAC7CL,YAAQK,SAAR;AACD,GAFD;;AAIA,MAAI,KAAKd,sBAAL,MAAiCE,OAAOC,YAA5C,EAA0D;AACxDD,WAAOC,YAAP,CAAoBE,UAApB,CAA+BG,IAA/B;AACD;AACD,SAAO,KAAKV,gBAAL,CAAsBU,IAAtB,CAAP;;AAEAG,cAAYA,SAAS,IAAT,EAAeF,KAAf,CAAZ;AACD,CAbD;;AAeAZ,WAAWE,SAAX,CAAqBc,SAArB,GAAiC,UAAUL,IAAV,EAAgBG,QAAhB,EAA0B;AACzD,MAAIF,KAAJ;;AAEA,MAAI,KAAKT,sBAAL,MAAiCE,OAAOC,YAA5C,EAA0D;AACxDM,YAAQP,OAAOC,YAAP,CAAoBY,OAApB,CAA4BP,IAA5B,CAAR;AACD,GAFD,MAEO;AACLC,YAAQ,KAAKX,gBAAL,CAAsBU,IAAtB,KAA+B,IAAvC;AACD;AACDG,WAAS,IAAT,EAAeF,KAAf;AACD,CATD;;AAWAO,OAAOC,OAAP,CAAepB,UAAf,GAA4BA,UAA5B","sourcesContent":["var AuthEngine = function () {\n  this._internalStorage = {};\n};\n\nAuthEngine.prototype._isLocalStorageEnabled = function () {\n  var err;\n  try {\n    // Some browsers will throw an error here if localStorage is disabled.\n    global.localStorage;\n    \n    // Safari, in Private Browsing Mode, looks like it supports localStorage but all calls to setItem\n    // throw QuotaExceededError. We're going to detect this and avoid hard to debug edge cases.\n    global.localStorage.setItem('__scLocalStorageTest', 1);\n    global.localStorage.removeItem('__scLocalStorageTest');\n  } catch (e) {\n    err = e;\n  }\n  return !err;\n};\n\nAuthEngine.prototype.saveToken = function (name, token, options, callback) {\n  if (this._isLocalStorageEnabled() && global.localStorage) {\n    global.localStorage.setItem(name, token);\n  } else {\n    this._internalStorage[name] = token;\n  }\n  callback && callback(null, token);\n};\n\nAuthEngine.prototype.removeToken = function (name, callback) {\n  var token;\n\n  this.loadToken(name, function (err, authToken) {\n    token = authToken;\n  });\n\n  if (this._isLocalStorageEnabled() && global.localStorage) {\n    global.localStorage.removeItem(name);\n  }\n  delete this._internalStorage[name];\n\n  callback && callback(null, token);\n};\n\nAuthEngine.prototype.loadToken = function (name, callback) {\n  var token;\n\n  if (this._isLocalStorageEnabled() && global.localStorage) {\n    token = global.localStorage.getItem(name);\n  } else {\n    token = this._internalStorage[name] || null;\n  }\n  callback(null, token);\n};\n\nmodule.exports.AuthEngine = AuthEngine;\n"]}]