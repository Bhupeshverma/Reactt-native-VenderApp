["c851da20239666fc68b4f58119d4026c548c6932","0c79eab5c17fcb59faab3c17aea57d2f025ffa73",["./constants","./utils/isStatePlainEnough"],[763,814],{"version":3,"sources":["/home/ziddi/Desktop/venders/node_modules/redux-persist/lib/autoRehydrate.js"],"names":["exports","__esModule","_typeof","Symbol","iterator","obj","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","default","autoRehydrate","_constants","require","_isStatePlainEnough","_isStatePlainEnough2","_interopRequireDefault","config","undefined","stateReconciler","defaultStateReconciler","next","reducer","initialState","enhancer","store","liftReducer","replaceReducer","rehydrated","preRehydrateActions","state","action","type","REHYDRATE","log","push","logPreRehydrate","inboundState","payload","reducedState","concernedActions","slice","console","newState","keys","forEach"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = autoRehydrate;\n\nvar _constants = require('./constants');\n\nvar _isStatePlainEnough = require('./utils/isStatePlainEnough');\n\nvar _isStatePlainEnough2 = _interopRequireDefault(_isStatePlainEnough);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction autoRehydrate() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var stateReconciler = config.stateReconciler || defaultStateReconciler;\n\n  return function (next) {\n    return function (reducer, initialState, enhancer) {\n      var store = next(liftReducer(reducer), initialState, enhancer);\n      return _extends({}, store, {\n        replaceReducer: function replaceReducer(reducer) {\n          return store.replaceReducer(liftReducer(reducer));\n        }\n      });\n    };\n  };\n\n  function liftReducer(reducer) {\n    var rehydrated = false;\n    var preRehydrateActions = [];\n    return function (state, action) {\n      if (action.type !== _constants.REHYDRATE) {\n        if (config.log && !rehydrated) preRehydrateActions.push(action); // store pre-rehydrate actions for debugging\n        return reducer(state, action);\n      } else {\n        if (config.log && !rehydrated) logPreRehydrate(preRehydrateActions);\n        rehydrated = true;\n\n        var inboundState = action.payload;\n        var reducedState = reducer(state, action);\n\n        return stateReconciler(state, inboundState, reducedState, config.log);\n      }\n    };\n  }\n}\n\nfunction logPreRehydrate(preRehydrateActions) {\n  var concernedActions = preRehydrateActions.slice(1);\n  if (concernedActions.length > 0) {\n    console.log('\\n      redux-persist/autoRehydrate: %d actions were fired before rehydration completed. This can be a symptom of a race\\n      condition where the rehydrate action may overwrite the previously affected state. Consider running these actions\\n      after rehydration:\\n    ', concernedActions.length, concernedActions);\n  }\n}\n\nfunction defaultStateReconciler(state, inboundState, reducedState, log) {\n  var newState = _extends({}, reducedState);\n\n  Object.keys(inboundState).forEach(function (key) {\n    // if initialState does not have key, skip auto rehydration\n    if (!state.hasOwnProperty(key)) return;\n\n    // if initial state is an object but inbound state is null/undefined, skip\n    if (_typeof(state[key]) === 'object' && !inboundState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` is falsy but initial state is an object, skipping autoRehydrate.', key);\n      return;\n    }\n\n    // if reducer modifies substate, skip auto rehydration\n    if (state[key] !== reducedState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` modified, skipping autoRehydrate.', key);\n      newState[key] = reducedState[key];\n      return;\n    }\n\n    // otherwise take the inboundState\n    if ((0, _isStatePlainEnough2.default)(inboundState[key]) && (0, _isStatePlainEnough2.default)(state[key])) newState[key] = _extends({}, state[key], inboundState[key]); // shallow merge\n    else newState[key] = inboundState[key]; // hard set\n\n    if (log) console.log('redux-persist/autoRehydrate: key `%s`, rehydrated to ', key, newState[key]);\n  });\n  return newState;\n}"]}]